---
layout: post
title:  "vim编辑器常用操作"
desc: "vim编辑器常用操作"
keywords: "vim,linux,kinglyjn"
date: 2016-12-09
categories: [Linux]
tags: [Linux]
icon: fa-bookmark-o
---

### vim的三种模式

* 命令模式：
vi启动后默认进入的是命令模式，从这个模式使用命令可以切换到另外两种模式，同时无论在任何模式下只要按一下[Esc]键都可以返回命令模式。在命令模式中输入字幕“i”就可以进入vi的输入模式编辑文件。
* 输入模式：
在这个模式中我们可以编辑、修改、输入等编辑工作，在编辑器最后一行显示一个“--INSERT--”标志着vi进入了输入模式。当我们完成修改输入等操作的时候我们需要保存文件，这时我们需要先返回命令模式，在进入末行模式保存。
* 末行模式：
在命令模式输入“：”即可进入该模式，在末行模式中有好多好用的命令。<br>
![这里写图片描述](http://img.blog.csdn.net/20161212163639286?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQva2luZ2x5am4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

### 编辑操作

##### 进入输入模式命令
i插入命令<br> 
a附加命令<br>
o打开命令<br> 
c修改命令<br>
r取代命令<br> 
s替换命令<br> 
Esc退出命令<br><br>

##### 删除操作(命令模式使用)

x删除光标处的单个字符<br>
dd删除光标所在行<br>
dw删除当前字符到单词尾包括空格的所有字符<br>
x例如3x删除光标处向右的三个字符<br>
dd例如3dd从当前行开始向下删除三行文本<br><br>

#### 撤销操作

u命令取消最近一次的操作，可以使用多次来恢复原有的操作<br>
U取消所有操作<br>
Ctrl+R可以恢复对使用u命令的操作<br><br>

#### 复制操作

yy命令复制当前整行的内容到vi缓冲区<br>
yw复制当前光标所在位置到单词尾字符的内容到vi缓存区，相当于复制一个单词<br>
y$复制光标所在位置到行尾内容到缓存区<br>
y^复制光标所在位置到行首内容到缓存区<br>
yy例如：5yy就是复制5行<br>
yw例如：2yw就是复制两个单词<br>
如果要复制第m行到第n行之间的内容，可以在末行模式中输入m，ny例如：3，5y复制第三行到第五行内容到缓存区。<br><br>

#### 在纯文本终端下：

（1）选定文本块，使用v进入可视模式；移动光标键选定内容<br>
（2）复制选定块到缓冲区，用y；复制整行，用yy<br>
（3）剪切选定块到缓冲区，用d；剪切整行用dd<br>
（4）粘贴缓冲区中的内容，用p<br><br>

#### 查找和替换

vi的查找和替换功能主要在末行模式完成：
至上而下的查找<br>
/ 要查找的字符窜，其中/代表从光标所在位置起开始查找，例如：/ work<br>
至下而上的查找<br>
？要查找的字符窜 例如：/ work<br><br>

#### 替换

:s/old/new 用new替换行中首次出现的old<br>
:s/old/new/g 用new替换行中所有出现的old<br>
:s/old/new/c 用new替换行中所有出现的old，需要用户确认<br>
:#,# s/old/new/g 用new替换从第＃行到第＃行中出现的old<br>
:% s/old/new/g 用new替换整篇中出现的old<br>
:% s/old/new/gi 用new替换整篇中出现的old,忽略大小写<br><br>

#### 恢复文件

vi在编辑某一个文件时，会生成一个临时文件，这个文件以 . 开头并以 .swp结尾。正常退出该文件自动删除，如果意外退出例如忽然断电，该文件不会删除，我们在下次编辑时可以选择一下命令处理：<br>
O只读打开，不改变文件内容<br>
E继续编辑文件，不恢复.swp文件保存的内容<br>
R将恢复上次编辑以后未保存文件内容<br>
Q退出vi<br>
D删除.swp文件<br>
或者使用vi －r 文件名来恢复未保存的内容<br><br>

